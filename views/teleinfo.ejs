<link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"><style>
  /* Container styling */
  .container {
      max-width: 600px;
      margin: 40px auto;
      padding: 25px 30px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background-color: #fafafa;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
  }

  /* Heading */
  h1 {
      font-weight: 700;
      margin-bottom: 20px;
      color: #333;
  }

  /* Paragraph */
  p {
      font-size: 1.1rem;
      color: #555;
      margin-bottom: 15px;
  }

  /* Link styling */
  a {
      color: #007bff;
      text-decoration: none;
      font-weight: 600;
  }

  a:hover, a:focus {
      text-decoration: underline;
      color: #0056b3;
  }

  /* Alert boxes */
  .alert {
      border-radius: 6px;
      padding: 20px 25px;
      font-size: 1rem;
      line-height: 1.4;
  }

  /* Info alert */
  .alert-info {
      background-color: #e9f7fd;
      border: 1px solid #b6e0fd;
      color: #31708f;
  }

  /* Success alert */
  .alert-success {
      background-color: #e6f4ea;
      border: 1px solid #a3d7a5;
      color: #3c763d;
  }

  /* Ordered list inside alert */
  .alert ol {
      margin-top: 10px;
      padding-left: 20px;
      color: #444;
  }

  /* Code styling */
  code {
      background-color: #f1f1f1;
      padding: 2px 5px;
      font-family: monospace;
      border-radius: 3px;
      font-size: 0.95rem;
  }

  /* Button styling */
  .btn-primary {
      background-color: #0069d9;
      border-color: #0062cc;
      font-weight: 600;
      padding: 10px 24px;
      font-size: 1.1rem;
      border-radius: 6px;
      transition: background-color 0.3s ease;
  }

  .btn-primary:hover,
  .btn-primary:focus {
      background-color: #004a99;
      border-color: #003d7a;
      outline: none;
  }

  /* Disabled button */
  .btn-primary:disabled, 
  .btn-primary[disabled] {
      background-color: #7ba9d9;
      border-color: #7ba9d9;
      cursor: not-allowed;
      box-shadow: none;
  }

  /* Spacing */
  .mt-3 {
      margin-top: 1rem !important;
  }

  .mt-4 {
      margin-top: 1.5rem !important;
  }
</style>
<div class="telegram-connection-status mb-4">
  <% if (!info.telegram_username) { %>
    <!-- Not connected: show instructions -->
    <div class="alert alert-info" role="alert">
      <strong>Connect Your Telegram Account!</strong>
      <p>To complete this task, you need to connect your Telegram account.</p>
      <ol>
        <li>
          Start our Telegram bot: 
          <a href="https://t.me/verifyusermembershipBot" name="link1" target="_blank" rel="noopener noreferrer">
            @verifyusermembershipBot
          </a>
        </li>
        <li>Send the <code>/Start</code> command to the bot.</li>
        <li>Once connected, refresh this page to see your Telegram connection status.</li>
      </ol>
    </div>
  <% } else { %>
    <!-- Connected: show username -->
    <div class="alert alert-success" role="alert">
      <strong>Telegram Account Connected!</strong>
      <p>Your Telegram account (<strong>@<%= info.telegram_username %></strong>) is connected.</p>
    </div>
  <% } %>
</div>

<form action="/link-telegram" method="POST" class="mb-4">
  <div class="mb-3">
    <label for="telegram_user_id" class="form-label">
      Telegram User ID
      <small class="text-muted">(Copy from the bot and paste here)</small>
    </label>
    <input 
      type="text" 
      name="telegram_user_id" 
      id="telegram_user_id" 
      class="form-control" 
      required 
      aria-describedby="userIdHelp"
      placeholder="Enter your Telegram User ID"
    >
    <div id="userIdHelp" class="form-text">
      Your unique Telegram user ID from the bot.
    </div>
  </div>

  <div class="mb-3">
    <label for="telegram_username" class="form-label">
      Telegram Username
      <small class="text-muted">(Copy from the bot and paste here)</small>
    </label>
    <input 
      type="text" 
      name="telegram_username" 
      id="telegram_username" 
      class="form-control" 
      required 
      aria-describedby="usernameHelp"
      placeholder="Enter your Telegram Username"
    >
    <div id="usernameHelp" class="form-text">
      Your Telegram username (without @).
    </div>
  </div>

  <button type="submit" class="btn btn-primary">
    Link Telegram Account
  </button>
</form>

